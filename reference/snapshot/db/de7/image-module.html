<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Aurora Framework: Image Module</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Aurora Framework
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Image Module </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#summary-image">Summary</a></li>
<li class="level1"><a href="#prerequesites-image">Prerequisites</a></li>
<li class="level1"><a href="#the-basics-image">The basics</a></li>
<li class="level1"><a href="#making-a-image">Making the image</a></li>
<li class="level1"><a href="#create-hue-image">Creating the hue</a></li>
<li class="level1"><a href="#saving-image">Saving the image</a></li>
<li class="level1"><a href="#adding-alpha-image">Adding alpha</a></li>
</ul>
</div>
<div class="textblock"><p>The Image module contains useful methods and classes to handle image files.</p>
<h1><a class="anchor" id="summary-image"></a>
Summary</h1>
<p>By the end of this tutorial you'll know how to read and edit images using Aurora.</p>
<p>Oh, and also you'll be able to do this in code:</p>
<div class="image">
<img src="../../image-output-alpha.png" alt="image-output-alpha.png"/>
</div>
<h1><a class="anchor" id="prerequesites-image"></a>
Prerequisites</h1>
<p>This tutorial will use the two following Aurora modules:</p>
<ul>
<li>aurorafw-core</li>
<li>aurorafw-image</li>
<li>aurorafw-gengine-core</li>
</ul>
<h1><a class="anchor" id="the-basics-image"></a>
The basics</h1>
<p>Firstly, we shall bootstrap our Aurora program as we did in the <a class="el" href="../../df/da8/simple-afw-app.html">previous code</a>:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../db/d29/Aurora_8h.html">AuroraFW/Aurora.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="../../df/d5d/namespaceAuroraFW.html">AuroraFW</a>;</div><div class="line"></div><div class="line"><span class="keyword">using namespace </span>ImageManager;</div><div class="line"></div><div class="line"><a class="code" href="../../d2/d13/classAuroraFW_1_1Application.html">Application</a> *app;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> mainAppFunction()</div><div class="line">{</div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">int</span> <a class="code" href="../../db/dfa/simple_8c.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div><div class="line">{</div><div class="line">    app = <span class="keyword">new</span> <a class="code" href="../../d2/d13/classAuroraFW_1_1Application.html">Application</a>(mainAppFunction, argc, argv);</div><div class="line"></div><div class="line">    <span class="keyword">delete</span> app;</div><div class="line">    <span class="keywordflow">return</span> EXIT_SUCCESS;</div><div class="line">}</div></div><!-- fragment --><p>(Of course, the name of vars/methods/classes doesn't need to be exactly the same as written in the tutorials)</p>
<p>(<em>Notice how we declare the usage on the ImageManager namespace. It improves the readibility of the tutorial.</em>)</p>
<p>From here on out, all the code is written in the <code>mainAppFunction()</code> (so we can use Aurora).</p>
<h1><a class="anchor" id="making-a-image"></a>
Making the image</h1>
<p>To create an Image object, we simply do the following:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code" href="../../db/dfa/simple_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a> = 255;</div><div class="line"><span class="keywordtype">int</span> <a class="code" href="../../db/dfa/simple_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a> = 255;</div><div class="line"><span class="keywordtype">int</span> bpp = 24;</div><div class="line">Image myImage(FIF_PNG, <span class="stringliteral">&quot;nameOfImage.png&quot;</span>, <a class="code" href="../../d0/d4b/namespaceAuroraFW_1_1ImageManager.html#aae286801bc55666534c0bb6588c0e2e1aea4f21c4e21c8df072c2bc0d3d4098ad">ImageFlags::Write</a>, <a class="code" href="../../db/dfa/simple_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a>, <a class="code" href="../../db/dfa/simple_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>, bpp);</div></div><!-- fragment --><p>This code allocated space in memory for writing to a 255x255 image with a 24 bit depth.</p>
<p>You can check the Image's documentation to understand better the needed arguments, but, for the sake of this tutorial, we'll explain it quickly:</p>
<ul>
<li><code>FIF_PNG</code> declares the <a href="http://graphics.stanford.edu/courses/cs148-10-summer/docs/FreeImage3131.pdf">FreeImageFormat</a> (<em>page nÂº 13</em>) of the image (aka. it's extension)</li>
<li><code>"nameOfImage.png"</code> is the filename, including the extension</li>
<li><code>ImageFlags::Write</code> declares the image is only used to write.</li>
<li>The rest of the arguments declare, respectively, <code>width, height</code> and <code>bpp</code> (these should only be given if the image is non existent/has only the write flag).</li>
</ul>
<p>Now that we have the image allocated, let's write to it.</p>
<h1><a class="anchor" id="create-hue-image"></a>
Creating the hue</h1>
<p>To create the hue, we use the following formula:</p>
<div class="fragment"><div class="line"><span class="keywordflow">for</span>(<span class="keywordtype">int</span> x = 0; x &lt; <a class="code" href="../../db/dfa/simple_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a>; x++) {</div><div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y = 0; y &lt; <a class="code" href="../../db/dfa/simple_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>; y++) {</div><div class="line">        red = <a class="code" href="../../d8/d06/namespaceAuroraFW_1_1Math.html#ae8ad4da197b9c8a92285bcf1b612fcea">Math::clamp</a>(y-x, 0, <a class="code" href="../../db/dfa/simple_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>);</div><div class="line">        green = abs(y-<a class="code" href="../../db/dfa/simple_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>);</div><div class="line">        blue = x;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>But how do we write these RGB values onto the image? For that, we'll use the Color class defined in the gengine-core module:</p>
<div class="fragment"><div class="line"><a class="code" href="../../d1/ddd/namespaceAuroraFW_1_1CLI.html#a527b14bb403c1e0e62800a26d792bf13">GEngine::Color</a> color;</div></div><!-- fragment --><p>After that, we simply apply the above formula:</p>
<div class="fragment"><div class="line"><span class="keywordflow">for</span>(<span class="keywordtype">int</span> x = 0; x &lt; <a class="code" href="../../db/dfa/simple_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a>; x++) {</div><div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y = 0; y &lt; <a class="code" href="../../db/dfa/simple_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>; y++) {</div><div class="line">        color.setRed((uint8_t)<a class="code" href="../../d8/d06/namespaceAuroraFW_1_1Math.html#ae8ad4da197b9c8a92285bcf1b612fcea">Math::clamp</a>(y-x, 0, <a class="code" href="../../db/dfa/simple_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>));</div><div class="line">        color.setGreen((uint8_t)abs(y-<a class="code" href="../../db/dfa/simple_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>));</div><div class="line">        color.setBlue((uint8_t)x);</div><div class="line"></div><div class="line">        myImage.drawPixel(x, y, color);</div><div class="line">    }</div></div><!-- fragment --><p>The three first instructions (inside the nested for loop) simply store the RGB values to the Color object. It's in the last instruction that we ask for Aurora to write at said pixel *(x, y)* said color.</p>
<p>However, since this is a CLI application, we can't print the image to the console at runtime without <em>really</em> extra work. One way to see the results way easier is to simply save the image to disk.</p>
<h1><a class="anchor" id="saving-image"></a>
Saving the image</h1>
<p>To save the image to the disk, all you need is to call:</p>
<div class="fragment"><div class="line">myImage.saveImage();</div></div><!-- fragment --><p>This will save the image to the path previously given in the constructor (<em>in this case,</em> <code>nameOfImage.png</code>). If you go ahead and open it, you see that's... not exactly like we expected:</p>
<div class="image">
<img src="../../image-output.png" alt="image-output.png"/>
</div>
<p>At the start, the image is <em>lighter</em>. But why is this? Simple: the image on the top has <em>alpha</em> values, and we defined our image's bpp to be 24 (therefore, without alpha values).</p>
<p>In fact, if you had noticed this in the middle of the tutorial and tried to add alpha, you may have caught <b>a lot</b> of warnings like these:</p>
<div class="fragment"><div class="line">[WARNING] There are alpha values in the supplied color, however the image is not 32-bit.The alpha information will be lost. If you want to use alpha, first convert the image to 32-bit</div></div><!-- fragment --><p>So, let's add alpha to our image.</p>
<h1><a class="anchor" id="adding-alpha-image"></a>
Adding alpha</h1>
<p>There are actually two ways for your image to allow alpha values. You either:</p>
<ul>
<li>Declare the bpp to be 32 right in the constructor:</li>
</ul>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> <a class="code" href="../../db/dfa/simple_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a> = 255;</div><div class="line"><span class="keywordtype">int</span> <a class="code" href="../../db/dfa/simple_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a> = 255;</div><div class="line"><span class="keywordtype">int</span> bpp = 32;</div><div class="line">Image myImage(FIF_PNG, <span class="stringliteral">&quot;nameOfImage.png&quot;</span>, <a class="code" href="../../d0/d4b/namespaceAuroraFW_1_1ImageManager.html#aae286801bc55666534c0bb6588c0e2e1aea4f21c4e21c8df072c2bc0d3d4098ad">ImageFlags::Write</a>, <a class="code" href="../../db/dfa/simple_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a>, <a class="code" href="../../db/dfa/simple_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>, bpp);</div></div><!-- fragment --><p>Or you can also convert your image to 32 bits:</p>
<div class="fragment"><div class="line">myImage.convertTo32Bits();</div></div><!-- fragment --><p>After that, your image is ready to accept alpha values. To actually add them, just use the setAlpha() method of the Color class:</p>
<div class="fragment"><div class="line"><span class="keywordflow">for</span>(<span class="keywordtype">int</span> x = 0; x &lt; <a class="code" href="../../db/dfa/simple_8c.html#a2474a5474cbff19523a51eb1de01cda4">width</a>; x++) {</div><div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> y = 0; y &lt; <a class="code" href="../../db/dfa/simple_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>; y++) {</div><div class="line">        color.setRed((uint8_t)<a class="code" href="../../d8/d06/namespaceAuroraFW_1_1Math.html#ae8ad4da197b9c8a92285bcf1b612fcea">Math::clamp</a>(y-x, 0, <a class="code" href="../../db/dfa/simple_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>));</div><div class="line">        color.setGreen((uint8_t)abs(y-<a class="code" href="../../db/dfa/simple_8c.html#ad12fc34ce789bce6c8a05d8a17138534">height</a>));</div><div class="line">        color.setBlue((uint8_t)x);</div><div class="line"></div><div class="line">        color.setAlpha((uint8_t)128);</div><div class="line"></div><div class="line">        myImage.drawPixel(x, y, color);</div><div class="line">    }</div></div><!-- fragment --><p>The alpha values go from 0 to 255, being 0 totally transparent and 255 totally opaque.</p>
<p>If now you change your code to add the alpha value, your image should now look exactly like the one on the start of the tutorial. Congratulations, you made your first image using Aurora! </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
